# ๐ ุณุณุชู ุงุญุฑุงุฒ ููุช ุจุฏูู ุฑูุฒ ุนุจูุฑ (OTP-Based Authentication)

ุงู ูุงฺููุ ุณุณุชู ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑุงู ุฑุง ุจุฑ ุงุณุงุณ ุดูุงุฑู ุชููู ู ุฑูุฒ ฺฉโุจุงุฑ ูุตุฑู (OTP) ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ. ุงู ุฑูุดุ ุฌุงฺฏุฒู ุงูู ู ุณุงุฏู ุจุฑุง ุงุญุฑุงุฒ ููุช ุณูุช ุจุง ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุงุณุช.

## โจ ูฺฺฏโูุง

* **ูุฑูุฏ ู ุซุจุช ูุงู ฺฉูพุงุฑฺู:** ฺฉุงุฑุจุฑุงู ุจุง ูุงุฑุฏ ฺฉุฑุฏู ุดูุงุฑู ุชูููุ ููุฒูุงู ุนููุงุช ุซุจุช ูุงู ุง ูุฑูุฏ ุฑุง ุขุบุงุฒ ูโฺฉููุฏ.
* **ุงุญุฑุงุฒ ููุช ุจุฏูู ุฑูุฒ:** ุนุฏู ูุงุฒ ุจู ุฐุฎุฑูุ ูฺฏูุฏุงุฑ ุง ุจุงุฒุงุจ ุฑูุฒ ุนุจูุฑ.
* **ฺฉุฏ ฺฉโุจุงุฑ ูุตุฑู (OTP):** ุงุฑุณุงู ุฑูุฒูุง ุงููุช ูููุช ุงุฒ ุทุฑู ุณุฑูุณ ูพุงูฺฉ.
* **ฺฉูุชุฑู ุงููุถุง ฺฉุฏ:** ูุฏุฑุช ุฒูุงู ุงููุถุง ฺฉุฏูุง OTP ู ุฌููฺฏุฑ ุงุฒ ุงุณุชูุงุฏู ูุฌุฏุฏ.
* **ุงูฺฉุงู ุงุฑุณุงู ูุฌุฏุฏ:** ุงูฺฉุงู ุฏุฑุฎูุงุณุช ฺฉุฏ ุฌุฏุฏ ูพุณ ุงุฒ ุงุชูุงู ุฒูุงู ุงูุชุธุงุฑ.

## ๐๏ธ ูพุดโูุงุฒูุง

* Python 3.x
* Django 4.x/5.x
* ูุงุฒ ุจู ูพฺฉุฑุจูุฏ ฺฉ **ุณุฑูุณโุฏููุฏู ูพุงูฺฉ (SMS Provider)** ุจุฑุง ุชุงุจุน `send_sms`.

## โ๏ธ ุณุงุฎุชุงุฑ ูุงฺูู

ูุงฺูู ุงุตู ุงุญุฑุงุฒ ููุช ุฏุฑ ูุงูโูุง ุฒุฑ ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช:

### ฑ. ูุฏูโูุง (`accounts/models.py`)

ูุฏู ุงุตูุ `CustomUser` ุงุณุช ฺฉู ุจุงุฏ ุดุงูู ููุฏูุง ุฒุฑ ุจุฑุง ูุฏุฑุช OTP ุจุงุดุฏ:

| ููุฏ | ููุน | ุชูุถุญุงุช |
| :--- | :--- | :--- |
| `phone_number` | `CharField` | ุดูุงุฑู ุชููู ฺฉุงุฑุจุฑ (ููุฏ ุงุตู ุงุญุฑุงุฒ ููุช). |
| `otp_code` | `CharField` | ฺฉุฏ OTP ูุนู ฺฉู ุจุฑุง ฺฉุงุฑุจุฑ ุชููุฏ ุดุฏู ุงุณุช. |
| `otp_expiry` | `DateTimeField` | ุฒูุงู ุงููุถุง ฺฉุฏ OTP. |
| `is_phone_verified`| `BooleanField` | ูุดุงู ูโุฏูุฏ ฺฉู ุดูุงุฑู ุชููู ฺฉุงุฑุจุฑ ุชุงุฏ ุดุฏู ุงุณุช. |

> **ูฺฉุชู:** ูุชุฏ `otp_generate()` ุจุงุฏ ุฑู ุงู ูุฏู ุชุนุฑู ุดุฏู ุจุงุดุฏ ุชุง ฺฉ OTP ุฌุฏุฏ ุชููุฏ ฺฉุฑุฏูุ ุฒูุงู ุงููุถุง ุฑุง ุชูุธู ู ุขู ุฑุง ุฏุฑ ุฏุชุงุจุณ ุฐุฎุฑู ฺฉูุฏ.

### ฒ. ุณุฑูุณโูุง (`.services.py`)

ูุงู `services.py` ุจุงุฏ ุชุงุจุน `send_sms` ุฑุง ุดุงูู ุดูุฏ ฺฉู ูุธูู ุงุฑุชุจุงุท ุจุง API ุณุฑูุณ ูพุงูฺฉ ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ:

```python
# .services.py
def send_sms(phone_number, otp):
    """
    ูุณุฆูู ุงุฑุณุงู ฺฉุฏ OTP ุจู ุดูุงุฑู ุชููู ฺฉุงุฑุจุฑ ุงุณุช.
    ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ ุงุชุตุงู ุจู ูพูู ูพุงูฺฉ (ูุงููุฏ ฺฉุงูู ูฺฏุงุฑุ ูู ูพุงูฺฉ ู...) ุฏุงุฑุฏ.
    """
    # ... ูพุงุฏูโุณุงุฒ ูุงูุน ุงุชุตุงู ุจู API ูพุงูฺฉ ...
    return True # ุฏุฑ ุตูุฑุช ููููุช
ุฎู ุนุงู ุงุณุช ฺฉู ุณุณุชู ุงุญุฑุงุฒ ููุช ุฑุง ุจู ูพุฑูฺู ุฎูุฏ ุงุถุงูู ฺฉุฑุฏูโุงุฏ. ุณุงุฎุชู ูุงู README.md ฺฉ ฺฏุงู ููู ุจุฑุง ูุณุชูุฏุณุงุฒ ูพุฑูฺู ุงุณุช.
* **ุงูฺฉุงู ุงุฑุณุงู ูุฌุฏุฏ:** ุงูฺฉุงู ุฏุฑุฎูุงุณุช ฺฉุฏ ุฌุฏุฏ ูพุณ ุงุฒ ุงุชูุงู ุฒูุงู ุงูุชุธุงุฑ.

## ๐๏ธ ูพุดโูุงุฒูุง

* Python 3.x
* Django 4.x/5.x
* ูุงุฒ ุจู ูพฺฉุฑุจูุฏ ฺฉ **ุณุฑูุณโุฏููุฏู ูพุงูฺฉ (SMS Provider)** ุจุฑุง ุชุงุจุน `send_sms`.

## โ๏ธ ุณุงุฎุชุงุฑ ูุงฺูู

ูุงฺูู ุงุตู ุงุญุฑุงุฒ ููุช ุฏุฑ ูุงูโูุง ุฒุฑ ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช:

### ฑ. ูุฏูโูุง (`accounts/models.py`)

ูุฏู ุงุตูุ `CustomUser` ุงุณุช ฺฉู ุจุงุฏ ุดุงูู ููุฏูุง ุฒุฑ ุจุฑุง ูุฏุฑุช OTP ุจุงุดุฏ:

| ููุฏ | ููุน | ุชูุถุญุงุช |
| :--- | :--- | :--- |
| `phone_number` | `CharField` | ุดูุงุฑู ุชููู ฺฉุงุฑุจุฑ (ููุฏ ุงุตู ุงุญุฑุงุฒ ููุช). |
| `otp_code` | `CharField` | ฺฉุฏ OTP ูุนู ฺฉู ุจุฑุง ฺฉุงุฑุจุฑ ุชููุฏ ุดุฏู ุงุณุช. |
| `otp_expiry` | `DateTimeField` | ุฒูุงู ุงููุถุง ฺฉุฏ OTP. |
| `is_phone_verified`| `BooleanField` | ูุดุงู ูโุฏูุฏ ฺฉู ุดูุงุฑู ุชููู ฺฉุงุฑุจุฑ ุชุงุฏ ุดุฏู ุงุณุช. |

> **ูฺฉุชู:** ูุชุฏ `otp_generate()` ุจุงุฏ ุฑู ุงู ูุฏู ุชุนุฑู ุดุฏู ุจุงุดุฏ ุชุง ฺฉ OTP ุฌุฏุฏ ุชููุฏ ฺฉุฑุฏูุ ุฒูุงู ุงููุถุง ุฑุง ุชูุธู ู ุขู ุฑุง ุฏุฑ ุฏุชุงุจุณ ุฐุฎุฑู ฺฉูุฏ.

### ฒ. ุณุฑูุณโูุง (`.services.py`)

ูุงู `services.py` ุจุงุฏ ุชุงุจุน `send_sms` ุฑุง ุดุงูู ุดูุฏ ฺฉู ูุธูู ุงุฑุชุจุงุท ุจุง API ุณุฑูุณ ูพุงูฺฉ ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ:

```python
# .services.py
def send_sms(phone_number, otp):
    """
    ูุณุฆูู ุงุฑุณุงู ฺฉุฏ OTP ุจู ุดูุงุฑู ุชููู ฺฉุงุฑุจุฑ ุงุณุช.
    ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ ุงุชุตุงู ุจู ูพูู ูพุงูฺฉ (ูุงููุฏ ฺฉุงูู ูฺฏุงุฑุ ูู ูพุงูฺฉ ู...) ุฏุงุฑุฏ.
    """
    # ... ูพุงุฏูโุณุงุฒ ูุงูุน ุงุชุตุงู ุจู API ูพุงูฺฉ ...
    return True # ุฏุฑ ุตูุฑุช ููููุช
ณ. ูููุง (accounts/views.py)
ุชุงุจุน,ูุณุฑ URL,ุชูุถุญุงุช
login_signup_view,/login-signup/,ุฏุฑุงูุช ุดูุงุฑู ุชูููุ ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุฌุฏุฏ ุฏุฑ ุตูุฑุช ูุงุฒุ ุชููุฏ ู ุงุฑุณุงู OTP ู ุฐุฎุฑู ุดูุงุฑู ุฏุฑ Session.
verify,/verify/,ุฏุฑุงูุช ู ุชุฃุฏ ฺฉุฏ OTP ุงุฑุณุงู ฺฉุงุฑุจุฑ. ุจุฑุฑุณ ุงููุถุง ู ุตุญุช ฺฉุฏ. ุฏุฑ ุตูุฑุช ููููุชุ ูุฑูุฏ ฺฉุงุฑุจุฑ ู ุญุฐู ุดูุงุฑู ุงุฒ Session.
resend_otp,/resend-otp/,ุฏุฑุฎูุงุณุช ุงุฑุณุงู ูุฌุฏุฏ ฺฉุฏ OTP ุจุง ูุฏุฑุช ูุญุฏูุฏุช ุฒูุงู (Cooldown).
home,/home/,ุตูุญู ุงุตู (ุจุง ฺฺฉ ฺฉุฑุฏู ุงุญุฑุงุฒ ููุช).

๐ ุฑุงูููุง ูพุงุฏูโุณุงุฒ
ูุฏู ฺฉุงุฑุจุฑ: ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ูุฏู CustomUser ุดูุง ููุฏูุง otp_code, otp_expiry, ู is_phone_verified ุฑุง ุฏุงุฑุฏ ู ูุชุฏ otp_generate() ุจู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ.

ุชูุธู URLูุง: ูุณุฑูุง ุฒุฑ ุจุงุฏ ุฏุฑ urls.py ุชุนุฑู ุดููุฏ:
# accounts/urls.py
from . import views

urlpatterns = [
    path('login-signup/', views.login_signup_view, name='login_signup'),
    path('verify/', views.verify, name='verify'),
    path('resend-otp/', views.resend_otp, name='resend_otp'),
    path('home/', views.home, name='home'),
]
ูุงูุจโูุง HTML: ูุงูโูุง ุฒุฑ ุจุงุฏ ุจุฑุง ููุงุด ูุฑูโูุง ูุฌูุฏ ุฏุงุดุชู ุจุงุดูุฏ:

accounts/login_register.html (ูุฑู ูุฑูุฏ/ุซุจุชโูุงู ุจุง ุดูุงุฑู ุชููู)

accounts/verify.html (ูุฑู ูุฑูุฏ ฺฉุฏ OTP)

โ๏ธ ููุงุญุธุงุช ุงููุช
ูุฏุฑุช Session ุฏุฑ verify: ุฏุฑ ุตูุฑุช ูุจูุฏู ุดูุงุฑู ุฏุฑ Sessionุ ฺฉุงุฑุจุฑ ุจู ุฏุฑุณุช ุจู ุตูุญู ูุฑูุฏ ุฑุฏุงุฑฺฉุช ูโุดูุฏ.

ุจุฑุฑุณ ุตุญุช OTP: ฺฉุฏ ุงุฑุณุงู ฺฉุงุฑุจุฑ (code) ุจุง ฺฉุฏ ุฐุฎุฑูโุดุฏู (user.otp_code) ููุงุณู ูโุดูุฏ.

ฺฉูุชุฑู ุฒูุงู ุงููุถุง: ุงุฒ ฺฉุฏูุง ูููุถโุดุฏู ููโุชูุงู ุงุณุชูุงุฏู ฺฉุฑุฏ.
