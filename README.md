๐ OTP-Based Authentication (Django)

ุณุณุชู ุงุญุฑุงุฒ ููุช ุจุฏูู ุฑูุฒ ุนุจูุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ุดูุงุฑู ุชููู + ุฑูุฒ ฺฉโุจุงุฑ ูุตุฑู (OTP)

ุงู ูุงฺูู ฺฉ ูฺฉุงูุฒู ูุฑูุฏ ู ุซุจุชโูุงู ุณุงุฏูุ ุงูู ู ุณุฑุน ุฑุง ุฏุฑ ุฌูฺฏู ูุฑุงูู ูโฺฉูุฏ ู ุฌุงฺฏุฒู ููุงุณุจ ุจุฑุง ุณุณุชูโูุง ูุจุชู ุจุฑ ุฑูุฒ ุนุจูุฑ ุงุณุช.

โจ ูฺฺฏโูุง

ูุฑูุฏ ู ุซุจุชโูุงู ฺฉูพุงุฑฺู: ุชููุง ุจุง ูุงุฑุฏ ฺฉุฑุฏู ุดูุงุฑู ุชููู.

ุจุฏูู ูุงุฒ ุจู ุฑูุฒ ุนุจูุฑ: ฺฉุงุฑุจุฑ ุฑูุฒ ุนุจูุฑ ูุฏุงุฑุฏ ู ูููโฺุฒ ุจุง OTP ุงูุฌุงู ูโุดูุฏ.

ุงุฑุณุงู OTP ุจุง ูพุงูฺฉ: ุจุง ุงุณุชูุงุฏู ุงุฒ API ุณุฑูุณ ูพุงูฺฉ.

ูุฏุฑุช ุงููุถุง OTP: ุฌููฺฏุฑ ุงุฒ ุงุณุชูุงุฏู ูุฌุฏุฏ ุงุฒ ฺฉุฏูุง ูุฏู.

ุงุฑุณุงู ูุฌุฏุฏ OTP: ููุฑุงู ุจุง ฺฉูุชุฑู ูุงุตูู ุฒูุงู (Cooldown).

ุงูู ู ูุงุจู ุชูุณุนู: ุทุฑุงุญ ุดุฏู ุจุฑุง ูพุฑูฺูโูุง ูุงูุน.

๐ ูพุดโูุงุฒูุง

Python 3.x

Django 4.x ุง 5.x

ฺฉ ุงุฑุงุฆูโุฏููุฏู ุณุฑูุณ ูพุงูฺฉ (SMS Provider)

๐ ุณุงุฎุชุงุฑ ูุงฺูู
1. ูุฏู ฺฉุงุฑุจุฑ (accounts/models.py)

ูุฏู CustomUser ุจุงุฏ ุดุงูู ุงู ููุฏูุง ุจุงุดุฏ:

ููุฏ	ุชูุถุญ
phone_number	ุดูุงุฑู ุชูููุ ููุฏ ุงุตู ุจุฑุง ุงุญุฑุงุฒ ููุช
otp_code	ฺฉุฏ OTP ูุนู
otp_expiry	ุฒูุงู ุงููุถุง OTP
is_phone_verified	ูุถุนุช ุชุฃุฏ ุดูุงุฑู
๐ ูุชุฏ ุชููุฏ OTP

ูุฏู ุจุงุฏ ูุชุฏ ูุงููุฏ ุฒุฑ ุฏุงุดุชู ุจุงุดุฏ:

def otp_generate(self):
    """
    ุชููุฏ OTP ุฌุฏุฏ + ุฐุฎุฑู + ุชุนู ุฒูุงู ุงููุถุง
    """
    # ููููู:
    from datetime import timedelta
    from django.utils import timezone
    import random

    code = str(random.randint(100000, 999999))
    self.otp_code = code
    self.otp_expiry = timezone.now() + timedelta(minutes=2)
    self.save()
    return code

2. ุณุฑูุณ ุงุฑุณุงู ูพุงูฺฉ (accounts/services.py)
def send_sms(phone_number, otp):
    """
    ุงุฑุณุงู OTP ุจู ุดูุงุฑู ฺฉุงุฑุจุฑ ุงุฒ ุทุฑู API ูพูู ูพุงูฺฉ
    """
    # TODO: ุงุชุตุงู ุจู ุงุฑุงุฆูโุฏููุฏู ูพุงูฺฉ (ฺฉุงูู ูฺฏุงุฑุ ูู ูพุงูฺฉุ ippanel ู...)
    return True

๐งฉ 3. ูููุง (accounts/views.py)
ุชุงุจุน	URL	ุชูุถุญุงุช
login_signup_view	/login-signup/	ุฏุฑุงูุช ุดูุงุฑู ุชูููุ ุณุงุฎุช ฺฉุงุฑุจุฑ ุฏุฑ ุตูุฑุช ูุงุฒุ ุชููุฏ ู ุงุฑุณุงู OTP
verify	/verify/	ุชุฃุฏ ฺฉุฏ OTP ู ูุฑูุฏ ฺฉุงุฑุจุฑ
resend_otp	/resend-otp/	ุงุฑุณุงู ูุฌุฏุฏ OTP ุจุฑุง ฺฉุงุฑุจุฑ
home	/home/	ุตูุญู ุฎุงูู ุจุนุฏ ุงุฒ ูุฑูุฏ
๐ 4. ูุณุฑูุง URL
# accounts/urls.py

from django.urls import path
from . import views

urlpatterns = [
    path('login-signup/', views.login_signup_view, name='login_signup'),
    path('verify/', views.verify, name='verify'),
    path('resend-otp/', views.resend_otp, name='resend_otp'),
    path('home/', views.home, name='home'),
]

๐ผ๏ธ 5. ูุงูุจโูุง HTML ููุฑุฏูุงุฒ

accounts/login_register.html
ูุฑู ูุฑูุฏ/ุซุจุชโูุงู ุจุง ุดูุงุฑู ุชููู

accounts/verify.html
ูุฑู ูุงุฑุฏ ฺฉุฑุฏู OTP

๐ ูฺฉุงุช ุงููุช

ุจุฑุฑุณ Session
ุงฺฏุฑ ุดูุงุฑู ุฏุฑ session ูุจุงุดุฏุ ฺฉุงุฑุจุฑ ูุณุชูู ุจู ุตูุญู ูุฑูุฏ ููุชูู ูโุดูุฏ.

ุจุฑุฑุณ ุตุญุช OTP
ููุฏุงุฑ ูุงุฑุฏุดุฏู ุจุง user.otp_code ููุงุณู ูโุดูุฏ.

ุจุฑุฑุณ ุงููุถุง OTP
ุงฺฏุฑ otp_expiry ฺฏุฐุดุชู ุจุงุดุฏุ OTP ูุนุชุจุฑ ูุณุช.

Cooldown ุจุฑุง ุงุฑุณุงู ูุฌุฏุฏ
ุฌููฺฏุฑ ุงุฒ ุงุฑุณุงู ุงุณูพู ูพุงูฺฉ.

๐ ุฌูุนโุจูุฏ

ุจุง ุงู ูุงฺูู ูโุชูุงูุฏ ุงุญุฑุงุฒ ููุช ุงููุ ุณุฑุน ู ุจุฏูู ุฏุฑุฏุณุฑ ูุจุชู ุจุฑ ุดูุงุฑู ุชููู ุฑุง ุจู ูพุฑูฺู ุฌูฺฏู ุฎูุฏ ุงุถุงูู ฺฉูุฏ. ุณุงุฎุชุงุฑ ูุงฺูู ูุงุจู ุชูุณุนู ุงุณุช ู ูโุชูุงูุฏ ุจุง ูุฑ API ูพุงูฺฉ ุงุฏุบุงู ุดูุฏ.
